<#bs4Body>
<div class="container-fluid">
    <div class="row">
        <nav class="col-12" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item active" aria-current="page">结算单</li>
            </ol>
        </nav>
    </div>
    <form id="queryForm" role="form" novalidate>
        <div class="row">
            <div class="form-group col-auto">
                业务类型
            </div>
            <div class="form-group col-auto">
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk-type-all" type="checkbox" checked>
                    <label class="form-check-label">全选</label>
                </div>
            </div>
            <% if (isNotEmpty(businessTypeList) && businessTypeList.~size > 0) {
                for (type in businessTypeList) {
            %>
            <div class="form-group col-auto">
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk-type-item" type="checkbox" name="businessTypeList[${typeLP.dataIndex}]" value="${type.code}" checked>
                    <label class="form-check-label">${type.val!}</label>
                </div>
            </div>
            <% } }%>
        </div>
        <div class="row  row-cols-6">
            <div class="form-group col">
                <label for="business-dep" class="">业务所属部门</label>
                <select id="business-dep" name="businessDepId" class="form-control"></select>
                <#bcomboProvider _id='business-dep' _provider='departmentProvider' _queryParams='{emptyText:"全部",marketId:"${marketId}"}'/>
            </div>
            <div class="form-group col">
                <label for="customerNameMatch" class="">客户名称</label>
                <input type="text" class="form-control" name="customerNameMatch" id="customerNameMatch" maxlength="40"/>
            </div>
            <div class="form-group col">
                <label for="operatorNameMatch" class="">结算员</label>
                <input type="text" class="form-control" name="operatorNameMatch" id="operatorNameMatch" maxlength="40"/>
            </div>
            <div class="form-group col">
                <label for="code" class="">结算编号</label>
                <input type="text" class="form-control" name="code" id="code" maxlength="32"/>
            </div>
            <div class="form-group col">
                <label for="businessCode" class="">业务单号</label>
                <input type="text" class="form-control" name="businessCode" id="businessCode" maxlength="32"/>
            </div>
            <div class="form-group col">
                <label for="settle-state" class="">结算状态</label>
                <select id="settle-state" name="state" class="form-control"></select>
                <#bcomboProvider _id='settle-state' _provider='settleStateProvider' _queryParams='{emptyText:"全部"}'/>
            </div>
            <div class="form-group col">
                <label for="settle-type" class="">结算类型</label>
                <select id="settle-type" name="type" class="form-control"></select>
                <#bcomboProvider _id='settle-type' _provider='settleTypeProvider' _queryParams='{emptyText:"全部"}'/>
            </div>
            <div class="form-group col">
                <label for="settle-way" class="">结算方式</label>
                <select id="settle-way" name="way" class="form-control"></select>
                <#bcomboProvider _id='settle-way' _provider='settleWayProvider' _queryParams='{emptyText:"全部"}'/>
            </div>
            <div class="form-group col-auto">
                <label class="justify-content-end">结算日期</label>
                <div class="form-inline">
                    <div class="input-group">
                        <input type="text" name="operateTimeStart" id="operateTimeStart" value="${operateTimeStart!}" class="form-control laydatetime"/>
                        <div class="input-group-append">
                            <label for="operateTimeStart"  class="input-group-text fa fa-calendar"></label>
                        </div>
                    </div>&nbsp;&nbsp;至&nbsp;&nbsp;
                    <div class="input-group">
                        <input type="text" name="operateTimeEnd" id="operateTimeEnd" value="${operateTimeEnd!}" class="form-control laydatetime"/>
                        <div class="input-group-append">
                            <label for="operateTimeEnd"  class="input-group-text fa fa-calendar"></label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="">
            <button type="button" class="btn btn-primary" onclick="queryDataHandler()"><i class="fa fa-search"></i> 查询
            </button>
            <button type="button" class="btn btn-secondary" onclick="javascript:$('#queryForm')[0].reset();"><i
                    class="fa fa-trash-o"></i> 清空
            </button>
        </div>
    </form>
    <hr>
    <div class="row">
        <div class="col-12">
            <div id="toolbar" class="btn-group" role="group" aria-label="Toolbar with button groups">
                <#resource code="settlement-reprint">
                <button id="btn-reprint" type="button" class="btn btn-primary" onclick=""><i class="fa fa-print"></i>
                    单据补打
                </button>
                </#resource>
            </div>
            <table id="grid" data-toggle="table" data-title="结算单" class="table" data-toolbar="#toolbar"
                   data-pagination="true" data-page-number="1" data-page-size="10"
                   data-query-params="queryParams" data-side-pagination="server" data-method="POST"
                   data-content-type="application/x-www-form-urlencoded" data-single-select="true"
                   data-click-to-select="true" data-unique-id="id" data-sort-name="id"
                   data-sort-order="desc" data-icons="bui.variable.icons" data-buttons-class="primary"
                   data-show-refresh="true" data-show-fullscreen="true" data-show-columns="true">
                <thead>
                <tr>
                    <th data-align="center" data-checkbox="true"></th>
                    <% if (hasResource("settlement-list-business-detail")) { %>
                    <th data-field="businessCode" data-align="center" data-formatter="businessCodeFormatter">
                        业务单号
                    </th>
                    <% } else { %>
                    <th data-field="businessCode" data-align="center">
                        业务单号
                    </th>
                    <% } %>
                    <th data-field="businessName" data-align="center">
                        业务类型
                    </th>
                    <th data-field="businessDepName" data-align="center">
                        业务所属部门
                    </th>
                    <th data-field="customerName" data-align="center">
                        客户名称
                    </th>
                    <th data-field="customerPhone" data-align="center">
                        联系电话
                    </th>
                    <th data-field="typeName" data-align="center">
                        结算类型
                    </th>
                    <th data-field="amountView" data-align="center">
                        金额
                    </th>
                    <th data-field="operatorName" data-align="center">
                        结算员
                    </th>
                    <th data-field="operateTime" data-align="center">
                        结算时间
                    </th>
                    <th data-field="stateName" data-align="center">
                        结算状态
                    </th>
                    <th data-field="wayName" data-align="center">
                        结算方式
                    </th>
                    <th data-field="serialNumber" data-align="center">
                        流水号
                    </th>
                    <th data-field="code" data-align="center">
                        结算编号
                    </th>
                </tr>
                </thead>
            </table>
        </div>
    </div>
</div>
</div>
</#bs4Body>
<#common_commonJs/>
<#settleOrder_indexJs/>